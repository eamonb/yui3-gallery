YUI.add("gallery-nmmenus",function(a){YUI.add("gallery-nmmenus",function(b){b.NMMenus=b.Base.create("nmmenus",b.Widget,[],{initializer:function(c){b.all("#"+this.get("menudivid")+" ul li ul").each(function(d){d.get("parentNode").one(".topLink").addClass("hasSubMenu");});if(this.get("ajaxLoadFunc")){this.get("ajaxLoadFunc").call(null,this,this);}this.set("pulsesleft",this.get("pulses"));this.set("pulseduration",this.get("pulseduration")/this.get("pulses"));if(!this.get("nopulsate")&&!this.get("ajaxLoadFunc")){this.initNavMenuPulsate.call(this);}b.all("#"+this.get("menudivid")+" .topLink").each(function(d){if(!d.hasClass("hasSubMenu")){b.on("mouseleave",function(f){d.get("parentNode").removeClass("active");},d);}});b.all("#"+this.get("menudivid")+" .hasSubMenu").each(function(g,d){var f=g.get("parentNode"),e=f.one("ul");b.on("mouseenter",function(h){b.all("#"+this.get("menudivid")+" .hasSubMenu").get("parentNode").removeClass("active");f.addClass("active");var i=this.calcMenuDimensions(e);switch(this.get("anim")){case"fade":e.setStyles({opacity:0,display:"block",height:""});e.transition({opacity:1,easing:"ease-out",duration:this.get("inDuration")});break;case"blind":e.setStyles({height:"0px",display:"block",position:"absolute",top:g.getComputedStyle("height"),width:i[0],opacity:1});e.transition({height:i[1],duration:this.get("inDuration"),easing:"ease-out",on:{end:function(){e.setStyle("height","");}}});break;default:break;}},f,this);b.on("mouseleave",function(h){this.hideNavMenu.call(this,{topLi:f});},f,this);},this);},calcMenuDimensions:function(c){c.setStyles({display:"block",height:""});var e=c.getComputedStyle("height");var d=c.getComputedStyle("width");c.setStyle("display","none");return[d,e];},hideNavMenu:function(c){c.subMenu=c.topLi.one("ul");switch(this.get("anim")){case"fade":c.subMenu.transition({opacity:0,duration:this.get("outDuration"),easing:"ease-out",on:{end:function(){c.subMenu.setStyle("height","0px");c.topLi.removeClass("active");}}});break;case"blind":c.subMenu.transition({height:"0px",duration:this.get("outDuration"),easing:"ease-out",on:{end:function(){c.subMenu.setStyle("display","none");c.topLi.removeClass("active");}}});break;default:break;}},initNavMenuPulsate:function(c,d){b.all("#"+this.get("menudivid")+" li a.topLink").each(function(e){e=e.get("parentNode");b.delegate("click",b.bind(function(f){if(f.target.get("href").match(/#$/)&&f.target.hasClass("topLink")){f.preventDefault();return;}else{if(b.one("#"+f.target.get("id")).hasClass("noajax")){return;}}f.preventDefault();if(f.target.hasClass("topLink")){window.location.href=f.target.get("href");}else{this.menuItemPulsate(f.target.get("id"),function(){window.location.href=f.target.get("href");});}},this),e,"a");},this);},menuItemPulsate:function(d,c,e){b.one("#"+d).transition({opacity:0,duration:(this.get("pulseduration")/2),on:{end:b.bind(function(){b.one("#"+d).transition({opacity:1,duration:(this.get("pulseduration")/2),on:{end:b.bind(function(){if(this.get("pulsesleft")>1){this.set("pulsesleft",this.get("pulsesleft")-1);this.menuItemPulsate.call(this,d,c,e);}else{this.set("pulsesleft",this.get("pulses"));this.hideNavMenu.call(this,{topLi:b.one("#"+this.get("menudivid")+" li.active")});if(c){c(e);}else{window.location.href=b.one("#"+d).get("pathname");}}},this)}});},this)}});}},{ATTRS:{anim:{value:"fade"},inDuration:{value:0.35},outDuration:{value:0.25},menudivid:{value:"menublock"},pulses:{value:2},pulseduration:{value:0.3},ajaxLoadFunc:{}}});},"gallery-2011.06.22-20-13",{requires:["base-build","widget","event-mouseenter","node","transition"]});},"gallery-2011.06.29-23-18",{requires:["base-build","widget","event-mouseenter","node","transition"]});